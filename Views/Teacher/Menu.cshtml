@model MessManagementSystem.Models.Shared.MenuItem
@{
    ViewData["Title"] = "Today's Menu";

    // Dynamic Time-Based Highlighting Logic
    var currentHour = DateTime.Now.Hour;

    bool isBreakfastTime = currentHour < 10;
    bool isLunchTime = currentHour >= 10 && currentHour < 16;
    bool isDinnerTime = currentHour >= 16;

    // Helper function for Card Styling
    string GetCardStyle(bool isActive) => isActive
        ? "background: var(--primary-gradient) !important; color: white !important; shadow-lg scale-105"
        : "background: white; shadow-sm";

    // Helper function for Icon Box Styling
    string GetIconBoxStyle(bool isActive, string fallbackColor) => isActive
        ? "background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(5px); color: white !important;"
        : $"background: {fallbackColor};";
}

<div class="container py-4">
    <div class="mb-4 d-flex justify-content-between align-items-center" data-aos="fade-down">
        <div>
            <h3 class="fw-800 mb-0 text-dark-emphasis">Daily Feast</h3>
            <p class="text-muted small mb-0"><i class="far fa-calendar-alt me-1"></i> @Model.Date.ToString("dddd, dd MMMM yyyy")</p>
        </div>

        <div class="bg-primary bg-opacity-10 text-primary p-2 px-4 rounded-pill small fw-800 border border-primary border-opacity-20"
             style="color: var(--primary-purple) !important; border-color: rgba(99, 102, 241, 0.2) !important;">
            <i class="fas fa-certificate me-2"></i> STANDARD RATE ACTIVE
        </div>
    </div>

    <div class="row g-4 align-items-stretch">
        <div class="col-md-4" data-aos="fade-up" data-aos-delay="100">
            <div class="card h-100 border-0 shadow-sm p-4 hover-lift transition-all @(isBreakfastTime ? "z-index-10" : "")"
                 style="border-radius: 28px; @GetCardStyle(isBreakfastTime)">
                <div class="rounded-circle d-flex align-items-center justify-content-center mb-4 shadow-sm"
                     style="width: 60px; height: 60px; @GetIconBoxStyle(isBreakfastTime, "rgba(245, 158, 11, 0.1)")">
                    <i class="fas fa-mug-hot h4 mb-0 @(isBreakfastTime ? "text-white" : "text-warning")"></i>
                </div>
                <h5 class="fw-800 mb-2 @(isBreakfastTime ? "text-white" : "text-dark")">Breakfast</h5>
                <p class="small text-uppercase ls-1 mb-3 @(isBreakfastTime ? "text-white opacity-75" : "text-muted opacity-50")">07:00 - 09:00</p>
                <div class="p-3 rounded-4 @(isBreakfastTime ? "bg-white bg-opacity-10 border border-white border-opacity-20" : "bg-light border")">
                    <h6 class="fw-600 mb-0 @(isBreakfastTime ? "text-white" : "text-dark-emphasis")">@Model.Breakfast</h6>
                </div>
            </div>
        </div>

        <div class="col-md-4" data-aos="fade-up" data-aos-delay="200">
            <div class="card h-100 border-0 shadow-sm p-4 hover-lift transition-all @(isLunchTime ? "z-index-10" : "")"
                 style="border-radius: 28px; @GetCardStyle(isLunchTime)">
                <div class="rounded-circle d-flex align-items-center justify-content-center mb-4 shadow-sm"
                     style="width: 60px; height: 60px; @GetIconBoxStyle(isLunchTime, "rgba(99, 102, 241, 0.1)")">
                    <i class="fas fa-sun h4 mb-0 @(isLunchTime ? "text-white" : "text-primary")"></i>
                </div>
                <h5 class="fw-800 mb-2 @(isLunchTime ? "text-white" : "text-dark")">Lunch Special</h5>
                <p class="small text-uppercase ls-1 mb-3 @(isLunchTime ? "text-white opacity-75" : "text-muted opacity-50")">13:00 - 15:00</p>
                <div class="p-3 rounded-4 @(isLunchTime ? "bg-white bg-opacity-10 border border-white border-opacity-20" : "bg-light border")">
                    <h6 class="fw-600 mb-0 @(isLunchTime ? "text-white" : "text-dark-emphasis")">@Model.Lunch</h6>
                </div>
            </div>
        </div>

        <div class="col-md-4" data-aos="fade-up" data-aos-delay="300">
            <div class="card h-100 border-0 shadow-sm p-4 hover-lift transition-all @(isDinnerTime ? "z-index-10" : "")"
                 style="border-radius: 28px; @GetCardStyle(isDinnerTime)">
                <div class="rounded-circle d-flex align-items-center justify-content-center mb-4 shadow-sm"
                     style="width: 60px; height: 60px; @GetIconBoxStyle(isDinnerTime, "rgba(59, 130, 246, 0.1)")">
                    <i class="fas fa-moon h4 mb-0 @(isDinnerTime ? "text-white" : "text-info")"></i>
                </div>
                <h5 class="fw-800 mb-2 @(isDinnerTime ? "text-white" : "text-dark")">Dinner</h5>
                <p class="small text-uppercase ls-1 mb-3 @(isDinnerTime ? "text-white opacity-75" : "text-muted opacity-50")">20:00 - 22:00</p>
                <div class="p-3 rounded-4 @(isDinnerTime ? "bg-white bg-opacity-10 border border-white border-opacity-20" : "bg-light border")">
                    <h6 class="fw-600 mb-0 @(isDinnerTime ? "text-white" : "text-dark-emphasis")">@Model.Dinner</h6>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-5 text-center p-5 border-0 shadow-sm position-relative overflow-hidden"
         style="border-radius: 35px; background: #fff;">
        <div class="position-relative" style="z-index: 2;">
            <h4 class="fw-800 text-dark-emphasis mb-2">Ready for your meal?</h4>
            <p class="text-muted mb-4 mx-auto" style="max-width: 500px;">Please ensure your attendance is marked before the 9:00 AM cutoff to help us maintain zero food waste.</p>

            <a asp-action="Attendance" class="btn text-white rounded-pill px-5 py-3 fw-800 shadow-lg hover-lift transition-all"
               style="background: var(--primary-gradient); border: none;">
                MARK ATTENDANCE <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
        <i class="fas fa-clock position-absolute end-0 bottom-0 opacity-05" style="font-size: 10rem; transform: translate(20%, 20%); color: var(--primary-purple);"></i>
    </div>
</div>